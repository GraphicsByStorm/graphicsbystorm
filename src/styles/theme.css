@import "tailwindcss";

/* Default dark */
:root { color-scheme: dark; }

/* ----------  Design tokens (Tailwind v4 @theme) ---------- */
@theme {
  /* Fonts */
  --font-sans: ui-sans-serif, system-ui, Inter, "Segoe UI", Roboto, Arial,
               "Apple Color Emoji","Segoe UI Emoji";
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
               "Liberation Mono","Courier New", monospace;

  /* Brand colors (tweak hue as you like) */
  --color-brand-50:  oklch(0.98 0.02 280);
  --color-brand-100: oklch(0.95 0.04 280);
  --color-brand-200: oklch(0.90 0.06 280);
  --color-brand-300: oklch(0.82 0.10 280);
  --color-brand-400: oklch(0.74 0.13 280);
  --color-brand-500: oklch(0.66 0.16 280);
  --color-brand-600: oklch(0.58 0.18 280);
  --color-brand-700: oklch(0.51 0.18 280);
  --color-brand-800: oklch(0.44 0.16 280);
  --color-brand-900: oklch(0.38 0.14 280);

  /* Surfaces */
  --color-surface-950: #0b0c0f;
  --color-surface-900: #0f1115;
  --color-surface-800: #151821;

  /* Radii / shadows */
  --radius-sm: .375rem;
  --radius-md: .5rem;
  --radius-lg: .75rem;
  --radius-xl: 1rem;
  --shadow-card: 0 1px 0 hsl(0 0% 100% / 0.05), 0 8px 24px hsl(0 0% 0% / 0.35);

  /* App container width */
  --container: 72rem;
}

/* ----------  Base layer ---------- */
@layer base {
  html, body { @apply bg-neutral-950 text-neutral-200 font-sans; }
  ::selection { @apply bg-brand-500/30 text-white; }
}

/* ----------  Reusable utilities ---------- */

@utility container-shell {
  max-inline-size: var(--container);
  margin-inline: auto;
  padding-inline: clamp(1rem, 4vw, 2rem);
}

@utility section-wrap {
  @apply container-shell py-12 md:py-16 border-b border-white/10;
}

@utility card {
  @apply rounded-xl border border-white/10 bg-neutral-900/60;
  box-shadow: var(--shadow-card);
  backdrop-filter: saturate(120%) blur(6px);
}

/* Buttons */
@utility btn {
  @apply inline-flex items-center justify-center gap-2 rounded-lg px-4 py-2
         text-sm font-medium transition-colors;
}
@utility btn-primary { @apply btn bg-brand-500 text-black hover:bg-brand-400; }
@utility btn-ghost   { @apply btn bg-transparent text-neutral-200 border border-white/15 hover:border-white/30; }
@utility btn-muted   { @apply btn bg-white text-black hover:bg-neutral-200; }

/* Chips */
@utility chip {
  @apply inline-flex items-center gap-2 rounded-full border border-white/15
         px-3 py-1.5 text-xs text-neutral-200 bg-neutral-900/60
         hover:border-white/30;
}
@utility chip-active { @apply bg-brand-500/15 border-brand-500/40 text-white; }

/* Forms */
@utility input   { @apply h-11 w-full rounded-md bg-neutral-900/70 border border-white/10 px-3 text-sm placeholder:text-neutral-500; }
@utility textarea{ @apply w-full min-h-32 rounded-md bg-neutral-900/70 border border-white/10 px-3 py-2 text-sm placeholder:text-neutral-500; }
@utility select  { @apply h-11 w-full rounded-md bg-neutral-900/70 border border-white/10 px-3 text-sm; }

/* Focus ring */
@utility focus-ring {
  outline: 2px solid var(--color-brand-500);
  outline-offset: 2px;
}

/* Headings */
@utility heading-hero { @apply text-5xl md:text-7xl font-extrabold tracking-tight; }
@utility heading-2    { @apply text-2xl md:text-3xl font-semibold; }

/* Links */
@utility link-underline { @apply underline underline-offset-4 decoration-white/30 hover:decoration-white; }

/* Scrollbar hiding (valid utility + extra CSS for WebKit) */
@utility no-scrollbar {
  scrollbar-width: none;        /* Firefox */
  -ms-overflow-style: none;     /* IE/Edge legacy */
}
@layer utilities {
  .no-scrollbar::-webkit-scrollbar { display: none; } /* Chrome/Safari */
}

/* ========= GRUNGE / POLISH (fixed + toned down) ========= */

/* Monochrome noise tile */
:root {
  --texture-noise: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='64' height='64' fill='black' filter='url(%23n)'/%3E%3C/svg%3E");
}

/* Subtle grid background */
@utility bg-grid {
  background-image:
    linear-gradient(to right, rgb(255 255 255 / 0.035) 1px, transparent 1px),
    linear-gradient(to bottom, rgb(255 255 255 / 0.035) 1px, transparent 1px);
  background-size: 32px 32px;
  background-position: center;
}

/* Card variant with grain + inner glow (unchanged look, lower strength) */
@utility card-grunge {
  @apply card;
  background-image:
    radial-gradient(120% 80% at 50% 0%, rgb(255 255 255 / 0.025), transparent 60%),
    var(--texture-noise);
  background-size: auto, 256px 256px;
  background-blend-mode: normal;
  opacity: 0.98;
}

/* Sticker look */
@utility sticker {
  @apply border border-dashed border-white/25 bg-neutral-900/70 rounded-lg;
  transform: rotate(-0.3deg);
  box-shadow:
    0 1px 0 rgb(255 255 255 / 0.05),
    0 18px 40px rgb(0 0 0 / 0.45);
}

/* Chips with speckled backing */
@utility chip-grunge {
  @apply border-white/25;
  background-color: rgb(255 255 255 / 0.08);
  -webkit-mask-image: var(--texture-noise);
          mask-image: var(--texture-noise);
  -webkit-mask-size: 256px 256px;
          mask-size: 256px 256px;
}

/* Hover microinteraction */
@layer utilities {
  .hover-lift {
    transition: transform 160ms ease, box-shadow 160ms ease, opacity 160ms ease;
    will-change: transform;
  }
  .hover-lift:hover { transform: translateY(-2px); }
  .hover-lift:active { transform: translateY(0) scale(.99); }
}

/* Global grain & vignette overlays
   NOTE: we do NOT set position on the host element here, so `sticky` still works.
   The pseudo-elements are absolutely positioned; theyâ€™ll anchor to any positioned ancestor
   (e.g., `sticky`, `relative`, `absolute`, `fixed`). */
@layer utilities {
  .grain-overlay::before {
    content: "";
    position: absolute; inset: 0;
    pointer-events: none;
    background-color: rgb(255 255 255 / 0.08);      /* faint, neutral */
    -webkit-mask-image: var(--texture-noise);
            mask-image: var(--texture-noise);
    -webkit-mask-size: 256px 256px;
            mask-size: 256px 256px;
    border-radius: inherit;
  }

  .vignette::after {
    content: "";
    position: absolute; inset: -1px;
    pointer-events: none;
    border-radius: inherit;
    box-shadow: inset 0 0 180px 60px rgb(0 0 0 / 0.55);
  }
}

/* Torn-edge section effect (unchanged) */
@layer utilities {
  .edge-rip { position: relative; }
  .edge-rip::before,
  .edge-rip::after {
    content: "";
    position: absolute; inset-inline: 0; height: 16px;
    background-image: var(--texture-noise);
    background-size: 256px 256px;
    opacity: 0.10;
    mask-image: linear-gradient(to bottom, black, transparent);
    -webkit-mask-image: linear-gradient(to bottom, black, transparent);
    pointer-events: none;
  }
  .edge-rip::before { top: -8px; transform: scaleY(-1); }
  .edge-rip::after  { bottom: -8px; }
}

/* Tape corner accent (unchanged) */
@layer utilities {
  .tape-corner { position: relative; }
  .tape-corner::after {
    content: ""; position: absolute; top: -8px; left: 12px;
    width: 54px; height: 20px; rotate: -6deg;
    background: linear-gradient(transparent 2px, rgb(255 255 255 / .06) 2px 18px, transparent 18px),
                repeating-linear-gradient(90deg, rgb(255 255 255 / .22), rgb(255 255 255 / .22) 2px, rgb(255 255 255 / .18) 2px, rgb(255 255 255 / .18) 4px);
    box-shadow: 0 6px 10px rgb(0 0 0 / .35);
    mix-blend-mode: screen;
  }
}

/* Gritty underline (unchanged) */
@layer utilities {
  .ink-underline {
    background:
      linear-gradient(currentColor, currentColor) 0 100% / 100% 1px no-repeat,
      radial-gradient(closest-side, currentColor 70%, transparent) 0 100% / 6px 2px repeat-x;
    text-decoration: none;
    padding-bottom: 2px;
  }
}