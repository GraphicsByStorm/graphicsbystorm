---
// File: src/components/Header.astro
import LogoAsync from '$components/LogoAsync.astro';
import UserMenu from '$svelte/components/UserMenu.svelte';

const leftLinks = [
  { href: "#hero", label: "Home" },
  { href: "#work", label: "Work" },
  { href: "#about", label: "About" },
];

const rightLinks = [
  { href: "#services", label: "Services" },
  { href: "#faq", label: "FAQ" },
  { href: "#shop", label: "Shop" },
  { href: "#contact", label: "Contact" },
];

const isHome = Astro.url.pathname === "/";
const withBase = (hash: string) => (isHome ? hash : `/${hash}`);

const { user } = Astro.locals;
---
<header class="sticky header-surface noise-overlay">
  <nav class="header-inner" aria-label="Primary">
    <div class="header-bar">
      <!-- Left (desktop) -->
      <ul class="hidden md:flex items-center gap-6">
        {leftLinks.map((item) => (
          <li><a href={withBase(item.href)} class="nav-link">{item.label}</a></li>
        ))}
      </ul>

      <!-- Center logo -->
      <div class="justify-self-center">
        <LogoAsync href={withBase('#hero')} class="h-8 w-auto mt-[2px]" />
      </div>

      <!-- Right (desktop) -->
      <div class="hidden md:flex items-center gap-4 justify-self-end">
        <ul class="flex items-center gap-6">
          {rightLinks.map((item) => (
            <li><a href={withBase(item.href)} class="nav-link">{item.label}</a></li>
          ))}
        </ul>
        <UserMenu client:load user={user} />
      </div>

      <!-- Mobile: single-row rail + user menu -->
      <div class="md:hidden flex items-center gap-3 justify-self-end">
        <div class="nav-rail">
          <ul class="flex items-center gap-3">
            {[...leftLinks, ...rightLinks].map((item) => (
              <li>
                <a href={withBase(item.href)} class="text-xs text-neutral-300 hover:text-white whitespace-nowrap px-2 py-1.5 rounded">
                  {item.label}
                </a>
              </li>
            ))}
          </ul>
        </div>
        <UserMenu client:load strategy="fixed" user={user} />
      </div>
    </div>
  </nav>
</header>
